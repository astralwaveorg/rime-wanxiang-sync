# Rime Â· ä¸‡è±¡æ‹¼éŸ³ Â· å¢è¡¥æ–‡ä»¶
patch:
  # 1. æ ¸å¿ƒè®¾å®šï¼šå¼ºåˆ¶ä½¿ç”¨çº¯å…¨æ‹¼æ–¹æ¡ˆï¼Œå¹¶æ›´æ–°æ–¹æ¡ˆä¿¡æ¯
  set_shuru_schema: å…¨æ‹¼ # ç›´æ¥æŒ‡å®šé»˜è®¤åŠ è½½å…¨æ‹¼æ–¹æ¡ˆï¼Œå–ä»£åŸå§‹çš„åŠ¨æ€åˆ‡æ¢æœºåˆ¶
  schema/version: "v2.2"
  schema/description: "ç²¾ç®€å¼ºå¤§çš„çº¯å…¨æ‹¼æ–¹æ¡ˆï¼Œæ”¯æŒå¹³ç¿˜èˆŒæ¨¡ç³ŠéŸ³ã€ä¸­è‹±æ··è¾“ä¸æ‰‹åŠ¨é€ è¯ã€‚"

  # 2. ä¾èµ–é¡¹ï¼šç§»é™¤åæŸ¥åŠŸèƒ½ï¼Œä¿ç•™ä¸­è‹±æ··è¾“ (ç»´æŒä¸å˜)
  schema/dependencies:
    - wanxiang_mixedcode

  # 3. å¼€å…³èœå•ï¼šç²¾ç®€ä¸ºé«˜é¢‘é€‰é¡¹ï¼Œå¹¶è®¾å®šé»˜è®¤çŠ¶æ€ (ç»´æŒä¸å˜)
  switches:
    - name: ascii_mode
      states: [æ±‰å­—, è¥¿æ–‡]
    - name: ascii_punct
      states: [ä¸­æ ‡, è‹±æ ‡]
    - name: full_shape
      states: [åŠè§’, å…¨è§’]
    - name: emoji
      states: [ğŸ˜, ğŸ˜„]
    - name: super_tips
      states: [å…³æç¤º, å¼€æç¤º]
    - options: [s2s, s2t]
      states: [ç®€ä½“, ç¹ä½“]
    - name: prediction
      states: [é¢„æµ‹, é—­é”]

  # 4.1 å¼•æ“ç²¾ç®€ï¼šè¦†å†™æ‰€æœ‰åˆ—è¡¨ï¼Œç¡®ä¿çº¯å‡€
  engine/processors:
    - predictor
    - lua_processor@*select_character
    - lua_processor@*quick_symbol_text
    - lua_processor@*super_tips
    - lua_processor@*super_sequence*P
    - lua_processor@*limit_repeated
    - lua_processor@*backspace_limit
    - lua_processor@*userdb_sync_delete
    - ascii_composer
    - recognizer
    - key_binder
    - lua_processor@*key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor

  # 4.2 ç²¾ç®€ translators
  engine/translators:
    - predict_translator
    - punct_translator
    - script_translator
    - lua_translator@*version_display
    - lua_translator@*shijian
    - lua_translator@*unicode
    - lua_translator@*number_translator
    - lua_translator@*super_calculator
    - lua_translator@*input_statistics
    - table_translator@custom_phrase
    - table_translator@chengyu
    - table_translator@wanxiang_mixedcode
    - script_translator@add_user_dict
    - script_translator@user_dict_set
    - lua_translator@*force_gc

  # 4.3 ç²¾ç®€ filters
  engine/filters:
    - lua_filter@*super_sequence*F
    - lua_filter@*autocap_filter
    - lua_filter@*super_preedit
    - lua_filter@*super_comment
    - simplifier@emoji
    - simplifier@s2t
    - simplifier@chinese_english
    - lua_filter@*text_formatting
    - uniquifier

  # 5 ç²¾ç®€ segmentors
  engine/segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@add_user_dict
    - punct_segmentor
    - fallback_segmentor

  # 6. åŠŸèƒ½å¢å¼ºï¼šä¸ºå…¨æ‹¼æ–¹æ¡ˆè¿½åŠ å¹³ç¿˜èˆŒæ¨¡ç³ŠéŸ³è§„åˆ™
  speller/algebra/+:
    # å¹³ç¿˜èˆŒæ¨¡ç³ŠéŸ³ z<=>zh, c<=>ch, s<=>sh
    - derive/^z/zh/
    - derive/^zh/z/
    - derive/^c/ch/
    - derive/^ch/c/
    - derive/^s/sh/
    - derive/^sh/s/

  # 7. å…¨å±€æ¸…ç†ï¼šé€šè¿‡ç½®ç©º(null)æ¥ç¦ç”¨ä¸å†ä½¿ç”¨çš„æ¨¡å—ä¸æ‰€æœ‰åŒæ‹¼æ–¹æ¡ˆ
  wanxiang_reverse: null
  radical_reverse_lookup: null
  s2hk: null
  s2tw: null
  key_binder/search: null
  è‡ªç„¶ç : null
  è‡ªç„¶é¾™: null
  æ±‰å¿ƒé¾™: null
  å°é¹¤åŒæ‹¼: null
  æœç‹—åŒæ‹¼: null
  å¾®è½¯åŒæ‹¼: null
  æ™ºèƒ½ABC: null
  ç´«å…‰åŒæ‹¼: null
  æ‹¼éŸ³åŠ åŠ : null
  ä¹±åº17: null

  # 8. å¿«æ·é”®ä¸è§¦å‘ç¬¦ï¼šè¦†å†™åˆ—è¡¨ï¼Œç§»é™¤é—²ç½®åŠŸèƒ½
  recognizer/patterns:
    punct: "^/([0-9]|10|[A-Za-z]+)$"
    unicode: "^U[a-f0-9]+"
    number: "^R[0-9]+[.]?[0-9]*"
    lunar: "^N[0-9]{1,8}"
    calculator: "^V.*$"
    quick_symbol: "^;.*$"

  key_binder/bindings:
    - { when: composing, accept: Control+w, send: Control+BackSpace }
    - { when: has_menu, accept: "Control+t", toggle: super_tips }
    - { when: has_menu, accept: "Tab", send: "Control+Right" }
    - { when: composing, accept: "Tab", send: "Control+Right" }
    - {
        when: composing,
        accept: "Control+Tab",
        send_sequence: "{Home}{Shift+Right}{1}{Shift+Right}",
      }
    - {
        when: composing,
        accept: Control+1,
        send_sequence: "{Home}{Shift+Right}",
      }
    - {
        when: composing,
        accept: Control+2,
        send_sequence: "{Home}{Shift+Right}{Shift+Right}",
      }
    - {
        when: composing,
        accept: Control+3,
        send_sequence: "{Home}{Shift+Right}{Shift+Right}{Shift+Right}",
      }
    - {
        when: composing,
        accept: Control+4,
        send_sequence: "{Home}{Shift+Right}{Shift+Right}{Shift+Right}{Shift+Right}",
      }
    - {
        when: composing,
        accept: Control+5,
        send_sequence: "{Home}{Shift+Right}{Shift+Right}{Shift+Right}{Shift+Right}{Shift+Right}",
      }
    - {
        when: composing,
        accept: Control+6,
        send_sequence: "{Home}{Shift+Right}{Shift+Right}{Shift+Right}{Shift+Right}{Shift+Right}{Shift+Right}",
      }
    - {
        match: "^.*`$",
        accept: "`",
        send_sequence: "{BackSpace}{Home}{`}{`}{End}",
      }
    - { when: has_menu, accept: minus, send: Page_Up }
    - { when: has_menu, accept: equal, send: Page_Down }
    - { when: composing, accept: Alt+Left, send: Shift+Left }
    - { when: composing, accept: Alt+Right, send: Shift+Right }
    - { when: always, toggle: ascii_punct, accept: Control+Shift+3 }
    - { when: always, toggle: ascii_punct, accept: Control+Shift+numbersign }
    - { when: always, toggle: s2t, accept: Control+Shift+4 }
    - { when: always, toggle: s2t, accept: Control+Shift+dollar }
